<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英语词汇学习 - ACG Style</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 背景动画 -->
    <div class="background-animation">
        <div class="sakura"></div>
        <div class="sakura"></div>
        <div class="sakura"></div>
    </div>

    <!-- 主容器 -->
    <div class="container">
        <!-- 头部导航 -->
        <header class="header">
            <div class="logo">
                <span class="icon">📚</span>
                <h1>英语词汇学习</h1>
            </div>
            <div class="header-stats">
                <div class="stat-item">
                    <span class="stat-label">今日进度</span>
                    <span class="stat-value" id="todayProgress">0/0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">总词汇量</span>
                    <span class="stat-value" id="totalWords">0</span>
                </div>
                <button class="btn btn-settings" id="settingsBtn">⚙️ 设置</button>
            </div>
        </header>

        <!-- 学习界面 -->
        <main class="main-content" id="learningView">
            <div class="card learning-card">
                <div class="card-header">
                    <span class="card-title">📖 今日学习</span>
                    <span class="question-number" id="questionNumber">1/10</span>
                </div>
                
                <div class="sentence-container">
                    <p class="sentence" id="sentenceText">
                        正在加载例句...
                    </p>
                    <p class="sentence-hint" id="sentenceHint"></p>
                </div>

                <div class="word-highlight">
                    <span class="target-word" id="targetWord">...</span>
                </div>

                <div class="options-container" id="optionsContainer">
                    <!-- 选项将动态生成 -->
                </div>

                <div class="action-buttons">
                    <button class="btn btn-secondary" id="showAnswerBtn">显示答案</button>
                    <button class="btn btn-primary" id="explainBtn" style="display:none;">
                        ✨ AI讲解
                    </button>
                </div>

                <div class="explanation-container" id="explanationContainer" style="display:none;">
                    <h3>💡 AI讲解</h3>
                    <div class="explanation-content" id="explanationContent">
                        正在生成讲解...
                    </div>
                </div>

                <div class="result-buttons" id="resultButtons" style="display:none;">
                    <button class="btn btn-secondary" id="prevBtn">⬅️ 上一题</button>
                    <button class="btn btn-primary" id="nextBtn">下一题 ➡️</button>
                </div>
            </div>
        </main>

        <!-- 统计界面 -->
        <aside class="stats-panel" id="statsPanel">
            <div class="card stats-card">
                <h2>📊 学习统计</h2>
                <div class="stats-grid">
                    <div class="stat-box">
                        <span class="stat-number" id="learnedToday">0</span>
                        <span class="stat-desc">今日学习</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number" id="reviewToday">0</span>
                        <span class="stat-desc">今日复习</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number" id="totalLearned">0</span>
                        <span class="stat-desc">累计学习</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number" id="accuracy">0%</span>
                        <span class="stat-desc">正确率</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number" id="mistakeCount" style="color: #ff6b6b;">0</span>
                        <span class="stat-desc">错题本</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- 设置面板 -->
        <div class="modal" id="settingsModal">
            <div class="modal-content card">
                <div class="modal-header">
                    <h2>⚙️ 设置</h2>
                    <button class="close-btn" id="closeSettings">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="setting-item">
                        <label for="dailyGoal">每日新词数量</label>
                        <input type="number" id="dailyGoal" min="5" max="100" value="20">
                        <small style="color: #666; display: block; margin-top: 5px;">
                            ⚠️ 这是最低目标，可以多学但不能少学。错题会自动混入每日学习。
                        </small>
                    </div>
                    <div class="setting-item">
                        <label for="sleepTime">睡眠时间（一天结束）</label>
                        <input type="time" id="sleepTime" value="23:00">
                    </div>
                    <div class="setting-item">
                        <label for="notificationEnabled">
                            <input type="checkbox" id="notificationEnabled">
                            启用学习提醒
                        </label>
                    </div>
                    <div class="setting-item">
                        <label for="notificationTime">提醒时间</label>
                        <input type="time" id="notificationTime" value="20:00">
                    </div>
                    <div class="setting-item">
                        <label for="geminiApiKey">Gemini API Key</label>
                        <input type="password" id="geminiApiKey" placeholder="输入你的API Key">
                    </div>
                    <div class="setting-item">
                        <button class="btn btn-primary" id="saveSettings">保存设置</button>
                        <button class="btn btn-secondary" id="exportData">导出数据</button>
                        <button class="btn btn-secondary" id="importData">导入数据</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 引入 sql.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    
    <!-- 应用脚本 -->
    <script type="module" src="js/db.js"></script>
    <script type="module" src="js/learning-algorithm.js"></script>
    <script type="module" src="js/ai-service.js"></script>
    <script type="module" src="js/notification.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>
