<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live2D æµ‹è¯•</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1525;
            color: white;
            font-family: sans-serif;
        }
        #status {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        #container {
            width: 300px;
            height: 400px;
            background: rgba(0,0,0,0.3);
            border: 2px solid #ff6b9d;
            border-radius: 15px;
            position: relative;
        }
    </style>
</head>
<body>
    <h1>ğŸ­ Live2D åŠ è½½æµ‹è¯•</h1>
    <div id="status">
        <div>PixiJS: <span id="pixi-status">æ£€æµ‹ä¸­...</span></div>
        <div>pixi-live2d-display: <span id="live2d-status">æ£€æµ‹ä¸­...</span></div>
        <div>æ¨¡å‹çŠ¶æ€: <span id="model-status">æœªå¼€å§‹</span></div>
    </div>
    <div id="container"></div>

    <!-- åº“åŠ è½½ -->
    <script src="https://cdn.jsdelivr.net/npm/pixi.js@7.x/dist/pixi.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/dylanNew/live2d/webgl/Live2D/lib/live2d.min.js"></script>
    <script src="js/live2dcubismcore.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/live2d.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/cubism4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/index.min.js"></script>

    <script>
        // æ£€æµ‹åº“åŠ è½½
        setTimeout(() => {
            const pixiStatus = document.getElementById('pixi-status');
            const live2dStatus = document.getElementById('live2d-status');
            const modelStatus = document.getElementById('model-status');

            if (typeof PIXI !== 'undefined') {
                pixiStatus.textContent = 'âœ… å·²åŠ è½½ v' + PIXI.VERSION;
                pixiStatus.style.color = '#6bcb77';
            } else {
                pixiStatus.textContent = 'âŒ æœªåŠ è½½';
                pixiStatus.style.color = '#e74c3c';
                return;
            }

            if (PIXI.live2d) {
                live2dStatus.textContent = 'âœ… å·²åŠ è½½';
                live2dStatus.style.color = '#6bcb77';
                
                // å°è¯•åŠ è½½æ¨¡å‹
                loadModel();
            } else {
                live2dStatus.textContent = 'âŒ æœªåŠ è½½';
                live2dStatus.style.color = '#e74c3c';
            }
        }, 1000);

        async function loadModel() {
            const modelStatus = document.getElementById('model-status');
            modelStatus.textContent = 'â³ åŠ è½½ä¸­...';
            modelStatus.style.color = '#ffd93d';

            try {
                const app = new PIXI.Application({
                    width: 300,
                    height: 400,
                    transparent: true,
                    autoStart: true
                });

                document.getElementById('container').appendChild(app.view);

                const modelPath = 'https://cdn.jsdelivr.net/gh/guansss/pixi-live2d-display/test/assets/shizuku/shizuku.model.json';
                console.log('Loading model from:', modelPath);

                const model = await PIXI.live2d.Live2DModel.from(modelPath);
                
                model.scale.set(0.25);
                model.anchor.set(0.5, 0.5);
                model.x = 150;
                model.y = 250;

                app.stage.addChild(model);

                modelStatus.textContent = 'âœ… åŠ è½½æˆåŠŸï¼';
                modelStatus.style.color = '#6bcb77';

                console.log('Model loaded successfully!', model);
            } catch (error) {
                modelStatus.textContent = 'âŒ åŠ è½½å¤±è´¥: ' + error.message;
                modelStatus.style.color = '#e74c3c';
                console.error('Failed to load model:', error);
            }
        }
    </script>
</body>
</html>
