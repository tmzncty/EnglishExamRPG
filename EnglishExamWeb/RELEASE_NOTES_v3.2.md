# English Exam RPG - v3.2 Release Notes

## ğŸ‰ v3.2: Drawing Board & AI Experience Upgrade

**Release Date**: 2026-01-16  
**Type**: Experience Update

---

## ğŸ“‹ What's New

### âœï¸ Enhanced Drawing Toolbar (ç»˜å›¾å·¥å…·å¢å¼º)

**æ ¸å¿ƒä¼˜åŒ–**:
- **æ¨¡å¼åˆ‡æ¢ä¿®å¤**: ä¿®å¤äº†ç»˜å›¾æ¨¡å¼æ— æ³•å…³é—­çš„é—®é¢˜ï¼Œç°åœ¨ç‚¹å‡»é“…ç¬”å›¾æ ‡å¯ä»¥è‡ªç”±åˆ‡æ¢ç»˜å›¾çŠ¶æ€ã€‚
- **HUD äº¤äº’ä¼˜åŒ–**: åœ¨ç»˜å›¾æ¨¡å¼ä¸‹ï¼Œå·¥å…·æ æŒ‰é’®ï¼ˆå¦‚è¿”å›ã€è®¾ç½®ï¼‰ä¾ç„¶å¯ä»¥è¢«ç‚¹å‡»ï¼Œä¸ä¼šè¢«ç”»æ¿é®æŒ¡ã€‚
- **æ»šåŠ¨/ç¿»é¡µä¿®å¤**: è§£å†³äº†åœ¨ç¿»é¡µæˆ–æ»šåŠ¨é¡µé¢æ—¶ï¼Œç”»æ¿å†…å®¹æ˜¾ç¤ºå¼‚å¸¸çš„é—®é¢˜ã€‚

**æŠ€æœ¯å®ç°**:
- ä¼˜åŒ–äº† `pointer-events` ç®¡ç†é€»è¾‘ï¼Œç²¾å‡†æ§åˆ¶ Canvas äº¤äº’åŒºåŸŸã€‚
- è°ƒæ•´äº† z-index å±‚çº§ï¼Œç¡®ä¿ UI å…ƒç´ å§‹ç»ˆä½äºç”»æ¿ä¹‹ä¸Šã€‚

### ğŸ’¬ Mia Chat Experience (å¯¹è¯ä½“éªŒå‡çº§)

**æ ¸å¿ƒä¼˜åŒ–**:
- **Enter é”®å†²çªä¿®å¤**: ä»¥å‰åœ¨èŠå¤©æ¡†æŒ‰ Enter ä¼šè¯¯è§¦å‘"ä¸‹ä¸€é¢˜"å¿«æ·é”®ï¼Œç°åœ¨å·²ä¿®å¤ï¼ŒEnter ä»…ç”¨äºå‘é€æ¶ˆæ¯ã€‚
- **ä¸Šä¸‹æ–‡å¢å¼º**: ä¼˜åŒ–äº† context æ³¨å…¥é€»è¾‘ï¼Œç¡®ä¿ Mia åœ¨å¤šè½®å¯¹è¯ä¸­å§‹ç»ˆè®°å¾—å½“å‰è®¨è®ºçš„é¢˜ç›®å’Œé€‰é¡¹ã€‚

### âš™ï¸ Reliable AI Connection (æ›´å¯é çš„ AI è®¾ç½®)

**æ ¸å¿ƒä¼˜åŒ–**:
- **è¿æ¥æµ‹è¯•**: æ–°å¢ "Test Connection" æŒ‰é’®ï¼Œç”¨æˆ·è¾“å…¥ API Key åå¯ç«‹å³æµ‹è¯•æœ‰æ•ˆæ€§ã€‚
- **æ¨¡å‹éªŒè¯**: æµ‹è¯•æˆåŠŸåä¼šæ˜¾ç¤ºå…·ä½“çš„æ¨¡å‹åç§°ï¼ˆå¦‚ `gemini-2.0-flash-exp`ï¼‰ï¼Œæœç»"å‡è”é€š"ã€‚
- **UI ä¿®å¤**: ä¿®å¤äº†è®¾ç½®é¢æ¿åœ¨æŸäº›æƒ…å†µä¸‹æ— æ³•æ‰“å¼€æˆ–ç‚¹å‡»æ— ååº”çš„ bugã€‚

### ğŸ”’ Security & Deployment (å®‰å…¨ä¸éƒ¨ç½²)

**æ ¸å¿ƒå˜æ›´**:
- **å®‰å…¨å®¡è®¡**: å…¨é¢æ‰«æäº†é¡¹ç›®ä»£ç ï¼Œç§»é™¤äº†æ‰€æœ‰ç¡¬ç¼–ç çš„å¼€å‘ç”¨ API Keyã€‚
- **Gitignore**: æ›´æ–°äº† `.gitignore`é…ç½®ï¼Œæ¶µç›–äº†æ‰€æœ‰æ•æ„Ÿçš„ç”Ÿæˆè„šæœ¬ (`gen_*.py`, `test_*.py`)ã€‚
- **Release**: è§„èŒƒäº†ç‰ˆæœ¬å‘å¸ƒæµç¨‹ã€‚

---

## ğŸ”§ Technical Changes

### Modified Files

| Component              | Changes                   | Impact       |
| :--------------------- | :------------------------ | :----------- |
| `js/drawing-board.js`  | Event handling & z-index  | Better UX    |
| `js/gemini-service.js` | Context management        | Smarter AI   |
| `js/ui-effects.js`     | Keydown propagation check | Bug Fix      |
| `index.html`           | Settings modal UI         | New Features |
| `.gitignore`           | Added sensitive patterns  | Security     |

---

## ğŸ§ª Testing

- âœ… **Drawing Mode**: å¼€å¯ -> ç”»å›¾ -> ç‚¹å‡»æŒ‰é’® -> å…³é—­ -> æ­£å¸¸ç¿»é¡µã€‚
- âœ… **Chat**: è¾“å…¥å†…å®¹ -> æŒ‰ Enter -> å‘é€æˆåŠŸ (ä¸è·³è½¬é¢˜ç›®)ã€‚
- âœ… **Settings**: è¾“å…¥ Key -> Test -> æ˜¾ç¤º "Connected to gemini-2.0-flash-exp"ã€‚

---

## ğŸ“¦ Upgrade Guide

1. **Pull Code**: `git pull origin main`
2. **Refresh Browser**: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–å¼ºåˆ¶åˆ·æ–° (Ctrl+F5) ä»¥åŠ è½½æœ€æ–°çš„ JS æ–‡ä»¶ã€‚
3. **Re-enter Key**: å»ºè®®é‡æ–°è¿›å…¥è®¾ç½®é¡µé¢æµ‹è¯• API Key è¿æ¥æ€§ã€‚

---

**Previous**: v3.1 (Bilingual Stories)  
**Current**: v3.2
