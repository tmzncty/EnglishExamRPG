# VocabWeb - 智能词汇学习系统

> 基于遗忘曲线的考研英语词汇学习 Web 应用，采用 ACG 风格设计。**支持多设备数据同步，手机电脑协同学习！**

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.7+-green.svg)](https://www.python.org/)
[![Flask](https://img.shields.io/badge/flask-3.0+-orange.svg)](https://flask.palletsprojects.com/)

**这是 [EnglishExamRPG](https://github.com/tmzncty/EnglishExamRPG) 项目的词汇学习子系统。**

---

## 🌟 核心特性

- 🔄 **跨设备数据同步** - 手机、电脑、平板共享学习进度，随时随地继续学习
- 🧠 **科学记忆算法** - SuperMemo 2 间隔重复算法，遗忘曲线管理
- 📋 **智能错题本** - 自动收集错题，连续答对 3 次才移出
- 🤖 **AI 智能讲解** - Gemini 2.0 Flash 驱动，提供词根词缀、记忆技巧
- 📚 **真题语境学习** - 所有例句来自 2010-2025 年考研真题
- ⚙️ **灵活配置** - 每个设备独立配置，学习数据统一同步

---

## 📊 数据统计

- ✅ **6131 个单词** - 覆盖考研核心词汇
- ✅ **1882 条真题例句** - 真实考试语境
- ✅ **完整题目元数据** - 年份、题型、section 等
- ✅ **预构建数据库** - 开箱即用，1.19 MB

---

## ⚡ 快速开始

### 方法一：使用服务器同步（推荐）

**适用场景**：多设备协同学习，数据实时同步

```bash
# 1. 克隆项目
git clone https://github.com/tmzncty/EnglishExamRPG.git
cd EnglishExamRPG/VocabWeb

# 2. 安装依赖（仅需一次）
pip install -r requirements.txt

# 3. 启动服务器
python server.py
# 或 Windows 用户双击 start.bat

# 4. 访问学习界面
# 📱 手机: http://你的电脑IP:8080
# 💻 电脑: http://localhost:8080
```

**🎯 完美场景**：
- 早上在电脑上学习 30 个单词 ✅
- 中午在手机上复习 10 个单词 ✅
- 晚上在平板上继续学习 ✅
- **所有进度完美同步！**

### 方法二：仅本地使用（单设备）

**适用场景**：只在当前设备学习，不需要同步

```bash
# 启动简单 HTTP 服务器
python -m http.server 8080

# 访问 http://localhost:8080/
```

⚠️ **注意**：此方式数据仅保存在当前浏览器，无法跨设备同步。

---

## 🎮 使用教程

### 首次使用

1. **启动服务器**
   ```bash
   python server.py
   ```
   看到以下信息表示成功：
   ```
   🚀 VocabWeb 服务器启动中...
   📱 支持跨设备数据同步
   🌐 访问地址: http://localhost:8080
   ```

2. **电脑访问**
   - 打开浏览器访问 `http://localhost:8080`
   - 系统会自动加载预构建数据库（6131 个单词）
   - 配置学习目标（建议电脑：50 个/天）

3. **手机访问**
   - 确保手机和电脑在同一 Wi-Fi
   - 在服务器输出中找到你的 IP（如 `http://192.168.1.100:8080`）
   - 手机浏览器访问该地址
   - 配置学习目标（建议手机：20 个/天）

### 多设备协同学习

**场景：手机和电脑一起学完今天的单词**

```
📱 手机（每日目标：20个）
   ↓ 午休时学习 20 个单词
   ↓ 自动同步到服务器 ✅
   ↓ 今日目标完成！

💻 电脑（每日目标：50个）
   ↓ 打开页面，加载服务器数据
   ↓ 看到已学习 20 个（手机学的）
   ↓ 继续学习 30 个单词
   ↓ 总共学习 50 个 ✅
   ↓ 今日目标完成！

✨ 结果：今天总共学了 50 个单词
   - 手机贡献 20 个
   - 电脑贡献 30 个
   - 数据完美同步！
```

**关键特性**：
- ✅ 学习进度实时同步（每 30 秒 + 答题后立即保存）
- ✅ 每个设备可以设置不同的每日目标
- ✅ 不会重复学习同一个单词
- ✅ 手机学过的单词，电脑不会再出现

---

## ✨ 核心功能

### 1. 🔄 跨设备数据同步（新功能）
- **服务器端数据存储**：学习进度保存在服务器
- **多端实时同步**：手机、电脑、平板共享同一进度
- **自动保存**：每 30 秒自动同步到服务器
- **离线缓存**：网络断开时使用本地缓存

### 2. 智能记忆算法 🧠
- **SuperMemo 2** 间隔重复算法
- 根据答题质量动态调整复习间隔
- 科学的遗忘曲线管理

### 3. 智能错题本 📋
- 答错自动进入错题本
- 连续答对 **3 次**才移出
- 错题自动混入每日学习（占比 20%）
- 实时追踪连续正确次数

### 4. AI 智能讲解 🤖
- **Gemini 2.0 Flash** 驱动
- 自动缓存讲解（节省 API 成本）
- 提供词根词缀、记忆技巧、常见搭配
- 离线也能查看已缓存的讲解

### 5. 真题语境学习 📚
- 所有例句来自 2010-2025 年考研真题
- 包含年份、题型、section 等元数据
- 学以致用，印象深刻

### 6. 灵活学习计划 📅
- 可设置每日最低目标（5-100 词）
- 支持超额完成（可多学不可少学）
- 自定义学习提醒
- 上一题回顾功能

---

## 📊 数据统计

- ✅ **6131 个单词**
- ✅ **1882 条真题例句**
- ✅ 完整题目元数据
- ✅ 预构建数据库 1.19 MB

---

## 🎯 使用流程

```
打开 index.html
    ↓
系统自动加载预构建数据库
    ↓
查看真题例句
    ↓
从 4 个选项中选择正确释义
    ↓
查看答案 → AI 讲解（可选）
    ↓
上一题 / 下一题
    ↓
完成每日目标 → 查看统计
```

---

## ⚙️ 设置选项

点击右上角"⚙️ 设置"按钮：

- **每日新词数量**：5-100 个（最低目标，可多学）
- **睡眠时间**：一天结束的时间点
- **学习提醒**：启用/禁用浏览器通知
- **提醒时间**：每日提醒时间
- **Gemini API Key**：AI 讲解功能（可选）
  - 📱 **手机用户注意**：手机端难以输入 API Key？
  - 💡 **解决方案**：在电脑上配置后，手机点击"🔄 同步配置"按钮即可
  - 📚 **详细教程**：查看 [API_KEY_SETUP.md](API_KEY_SETUP.md)

---

## 📖 错题本机制

```
第1次: 答错 → 进入错题本 (连续正确: 0/3)
第2次: 答对 → 仍在错题本 (连续正确: 1/3)
第3次: 答对 → 仍在错题本 (连续正确: 2/3)
第4次: 答对 → 移出错题本 ✅ (连续正确: 3/3)

注意：中途答错会重置计数器
```

---

## 🛠️ 技术栈

- **前端**: 纯原生 JavaScript（无框架）
- **数据库**: SQL.js（浏览器端 SQLite）
- **AI**: Gemini 2.0 Flash Exp
- **存储**: LocalStorage（完全本地化）
- **算法**: SuperMemo 2 间隔重复算法

---

## 🔧 常见问题与解决方案

### Q1: 如何在手机上访问？

**步骤**：
1. 确保手机和电脑在同一 Wi-Fi 网络
2. 在电脑上运行 `python server.py`
3. 查看服务器输出中显示的 IP 地址
   ```
   * Running on http://192.168.1.100:8080  ← 这就是你的 IP
   ```
4. 在手机浏览器输入该地址

**提示**：
- 可以将该地址添加到手机主屏幕，像 App 一样使用
- iOS: Safari → 分享 → 添加到主屏幕
- Android: Chrome → 菜单 → 添加到主屏幕

### Q2: 手机和电脑可以一起学习吗？

**可以！这正是跨设备同步的优势！**

示例场景：
```
你设定每日目标 50 个单词

上午 (手机)
  → 地铁上学了 15 个单词
  → 自动同步到服务器 ✅

中午 (手机)
  → 午休又学了 10 个单词
  → 已完成 25/50 ✅

晚上 (电脑)
  → 打开页面，显示已学 25 个
  → 继续学习剩余 25 个
  → 完成今日目标 50/50 🎉
```

**关键点**：
- 不同设备的学习记录会**累加**，不会重复
- 每个设备可以设置**不同的每日目标**
- 数据**实时同步**，无需手动操作

### Q3: 数据会自动同步吗？

**是的！** 使用 `python server.py` 启动后，系统会：
- ✅ 每次答题后立即保存到服务器
- ✅ 每 30 秒自动同步一次
- ✅ 打开页面时自动加载服务器最新数据
- ✅ 所有设备共享同一个数据库文件

### Q4: 配置会同步吗？

**不会，这是设计如此！**

**会同步的数据**（所有设备共享）：
- ✅ 学习记录和进度
- ✅ 词汇数据
- ✅ 错题本
- ✅ AI 讲解缓存

**不会同步的数据**（每个设备独立）：
- ⚙️ 每日学习目标（手机可以设 20，电脑设 50）
- ⚙️ 通知设置
- ⚙️ Gemini API Key

详见：[CONFIG.md](CONFIG.md)

### Q5: 页面一直显示"正在加载"怎么办？

**解决方法**：
1. 访问清除缓存页面：`http://localhost:8080/clear.html`
2. 点击"清除并重新加载"
3. 系统会自动加载预构建数据库

或在浏览器控制台执行：
```javascript
localStorage.clear();
location.reload();
```

### Q6: 离线可以使用吗？

**可以！**
- 有网络时：优先使用服务器数据
- 无网络时：使用本地 LocalStorage 缓存
- 恢复网络后：自动同步到服务器

**建议**：首次使用时联网，让系统下载预构建数据库。

### Q7: 如何备份数据？

**数据文件位置**：
```
VocabWeb/user_vocab.db
```

**备份方法**：
```bash
# Windows
copy VocabWeb\user_vocab.db D:\backup\vocab_20251213.db

# Mac/Linux
cp VocabWeb/user_vocab.db ~/backup/vocab_20251213.db
```

**恢复数据**：
```bash
# 替换数据库文件后重启服务器即可
```

---

## 🎯 推荐使用场景

### 场景一：碎片时间学习

```
早晨通勤 (手机) → 学 10 个单词
午休时间 (手机) → 学 10 个单词  
晚上回家 (电脑) → 深度学习 30 个单词
睡前复习 (手机) → 复习错题
```

### 场景二：不同设备不同目标

```
电脑 (主力学习)
  - 每日目标：50 个
  - 深度学习，查看详细讲解
  
手机 (碎片复习)
  - 每日目标：20 个
  - 快速刷题，巩固记忆

平板 (周末专用)
  - 每日目标：100 个
  - 集中攻克难点
```

### 场景三：团队学习

```
多人共用一个服务器
  → 每人用自己的设备访问
  → 学习进度各自独立
  → 可以创建多个数据库文件
```

## 🛠️ 技术栈

- **后端**: Flask 3.0 + Python 3.7+
- **前端**: 纯原生 JavaScript（无框架依赖）
- **数据库**: SQL.js（浏览器端 SQLite）
- **同步**: RESTful API + LocalStorage 缓存
- **AI**: Gemini 2.0 Flash Exp
- **算法**: SuperMemo 2 间隔重复算法
- **字体**: 霞鹜文楷等宽体

---

## 📁 项目结构

```
VocabWeb/
├── server.py               # Flask 后端服务器（跨设备同步）
├── start.bat               # Windows 快速启动脚本
├── requirements.txt        # Python 依赖
├── user_vocab.db           # 用户数据库（自动生成）
├── index.html              # 学习主界面
├── test.html               # 服务器测试页面
├── clear.html              # 缓存清除工具
├── fonts/
│   └── LXGWWenKaiMono-Medium.ttf  # 霞鹜文楷等宽字体
├── css/
│   └── style.css           # ACG 风格样式
├── js/
│   ├── app.js              # 主应用逻辑
│   ├── db.js               # 数据库操作（支持服务器同步）
│   ├── ai-service.js       # AI 智能讲解
│   ├── learning-algorithm.js  # SuperMemo 2 算法
│   └── notification.js     # 学习提醒
├── data/
│   ├── exam_vocabulary.json    # 词汇源数据
│   └── vocab_prebuilt.txt      # 预构建数据库（1.19 MB）
├── extract_vocab.py        # 从真题提取词汇
├── prebuild_database.py    # 生成预构建数据库
└── 📚 文档/
    ├── README.md           # 本文件
    ├── CONFIG.md           # 配置说明
    ├── DATA_SYNC.md        # 数据同步机制详解
    ├── USAGE_GUIDE.md      # 详细使用指南
    └── NEW_FEATURES.md     # 新功能介绍
```

---

## 📝 更新日志

### v2.1 (2025-12-13) 🎉

**🚀 重大更新：跨设备数据同步**
- ✅ 新增 Flask 后端服务器
- ✅ 支持手机、电脑、平板多端实时同步
- ✅ 自动保存机制（每 30 秒 + 答题后立即保存）
- ✅ 离线缓存支持（LocalStorage）
- ✅ 配置文件独立管理（每设备可不同设置）

**🎨 界面优化**
- ✅ 使用霞鹜文楷等宽字体
- ✅ 更好的中文显示效果
- ✅ 新增服务器测试页面
- ✅ 新增缓存清除工具

**📚 文档完善**
- ✅ 新增 CONFIG.md（配置说明）
- ✅ 新增 DATA_SYNC.md（同步机制）
- ✅ 新增 USAGE_GUIDE.md（使用指南）
- ✅ 完善 README（多设备协同学习说明）

### v2.0 (2025-12-13)
- 🎉 正式发布
- ✨ 智能错题本系统（连续答对 3 次移出）
- ✨ AI 讲解缓存（节省 API 成本）
- ✨ 上一题回顾功能
- ✨ 预构建数据库（6131 个单词开箱即用）
- 🐛 修复大数据导入问题

---

## 📚 相关文档

| 文档 | 说明 |
|------|------|
| [CONFIG.md](CONFIG.md) | 配置文件详细说明，解释哪些配置同步，哪些不同步 |
| [DATA_SYNC.md](DATA_SYNC.md) | 数据同步机制详解，包含技术实现细节 |
| [USAGE_GUIDE.md](USAGE_GUIDE.md) | 完整使用指南，包含常见问题解决方案 |
| [NEW_FEATURES.md](NEW_FEATURES.md) | 新功能介绍和使用说明 |
| [PREBUILT_DATABASE.md](PREBUILT_DATABASE.md) | 预构建数据库说明 |

---

## 🎓 学习建议

### 每日学习计划

**初级阶段**（前 2 周）
- 每日目标：20-30 个新词
- 重点：打好基础，熟悉系统
- 设备分配：手机 10 个 + 电脑 20 个

**进阶阶段**（3-8 周）
- 每日目标：40-50 个新词
- 重点：扩大词汇量，建立语感
- 设备分配：碎片时间手机，晚上电脑集中学习

**冲刺阶段**（考前 1 个月）
- 每日目标：50-100 个（新词+复习）
- 重点：查漏补缺，攻克错题
- 设备分配：全天候学习，随时随地

### 复习策略

```
错题本：每天必做 20%
新词：按 SuperMemo 2 算法推送
复习词：根据遗忘曲线自动安排
```

---

## ⚠️ 注意事项

1. **网络要求**
   - 多设备同步需要在同一局域网（同一 Wi-Fi）
   - 首次使用建议联网，下载预构建数据库
   - 后续可离线使用，联网时自动同步

2. **数据安全**
   - 数据保存在本地服务器，不会上传互联网
   - 建议定期备份 `user_vocab.db` 文件
   - 清除浏览器缓存不会丢失学习数据（服务器有备份）

3. **多人使用**
   - 当前版本所有设备共享同一数据库
   - 如需多用户，可创建多个数据库文件
   - 或在不同端口运行多个服务器实例

4. **API Key**
   - Gemini API Key 每设备单独设置
   - 建议使用相同的 Key（共享 AI 讲解缓存）
   - 不使用 AI 功能也完全可以学习

---

## 🤝 贡献与反馈

欢迎提交 Issue 或 Pull Request！

**主仓库**: [https://github.com/tmzncty/EnglishExamRPG](https://github.com/tmzncty/EnglishExamRPG)

**反馈渠道**:
- GitHub Issues
- Pull Requests
- Discussions

---

## 📄 许可证

MIT License

---

<div align="center">

## ⭐ Star History

如果这个项目对你有帮助，请给个 Star 支持一下！

**祝你考研成功！加油！💪**

Made with ❤️ by tmzncty

</div>
